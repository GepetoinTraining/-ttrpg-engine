// ============================================
// PUZZLE MODULE
// ============================================
//
// Interactive puzzles that render as HTML/React
// with state tracking, hints, and validation.
//
// Philosophy: PUZZLES SHOULD TEACH THEMSELVES
//
// Traditional TTRPG puzzles fail because:
//   - GM describes, players imagine differently
//   - No visual feedback on interactions
//   - Binary: stuck or solved, no middle ground
//   - One player solves, others watch
//   - Easy to softlock sessions
//
// Our puzzles succeed because:
//   - Visual, interactive components
//   - Every action gives feedback
//   - Progressive hints (earned, not given)
//   - Partial progress tracked and rewarded
//   - Multiple valid solutions
//   - State saved across sessions
//   - Everyone can participate
//

export * from "./builder";

// ============================================
// THE PUZZLE FLOW
// ============================================
//
//  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
//  â”‚                         GM CREATES PUZZLE                               â”‚
//  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
//                                    â”‚
//                                    â–¼
//  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
//  â”‚  1. Choose type (combination, sequence, spatial, logic, word...)       â”‚
//  â”‚  2. Set difficulty (trivial â†’ legendary)                               â”‚
//  â”‚  3. Add elements (dials, levers, tiles, buttons, beams...)             â”‚
//  â”‚  4. Define solution(s) - multiple valid paths                          â”‚
//  â”‚  5. Create hints (progressive: subtle â†’ obvious)                       â”‚
//  â”‚  6. Set rewards (loot, XP, narrative, world changes)                   â”‚
//  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
//                                    â”‚
//                                    â–¼
//  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
//  â”‚                    PUZZLE RENDERS AS HTML/REACT                         â”‚
//  â”‚                                                                         â”‚
//  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
//  â”‚   â”‚                    ANCIENT DOOR LOCK                            â”‚   â”‚
//  â”‚   â”‚                                                                 â”‚   â”‚
//  â”‚   â”‚     â”Œâ”€â”€â”€â”   â”Œâ”€â”€â”€â”   â”Œâ”€â”€â”€â”   â”Œâ”€â”€â”€â”                              â”‚   â”‚
//  â”‚   â”‚     â”‚ 3 â”‚   â”‚ 7 â”‚   â”‚ 2 â”‚   â”‚ 9 â”‚    â† Click to cycle         â”‚   â”‚
//  â”‚   â”‚     â””â”€â”€â”€â”˜   â””â”€â”€â”€â”˜   â””â”€â”€â”€â”˜   â””â”€â”€â”€â”˜                              â”‚   â”‚
//  â”‚   â”‚                                                                 â”‚   â”‚
//  â”‚   â”‚     "The stars align when the sum equals the moon"              â”‚   â”‚
//  â”‚   â”‚                                                                 â”‚   â”‚
//  â”‚   â”‚     Progress: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 45%                            â”‚   â”‚
//  â”‚   â”‚                                                                 â”‚   â”‚
//  â”‚   â”‚     [Request Hint 1/3]                                          â”‚   â”‚
//  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
//  â”‚                                                                         â”‚
//  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
//                                    â”‚
//                                    â–¼
//  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
//  â”‚                        PLAYERS INTERACT                                 â”‚
//  â”‚                                                                         â”‚
//  â”‚  â€¢ Click/drag/rotate elements                                           â”‚
//  â”‚  â€¢ Visual feedback on every action                                      â”‚
//  â”‚  â€¢ Progress bar updates                                                 â”‚
//  â”‚  â€¢ Wrong attempts tracked (but not punished harshly)                    â”‚
//  â”‚  â€¢ Can request hints (costs time/resources)                             â”‚
//  â”‚  â€¢ Multiple players can participate simultaneously                      â”‚
//  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
//                                    â”‚
//                                    â–¼
//  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
//  â”‚                         PUZZLE SOLVED                                   â”‚
//  â”‚                                                                         â”‚
//  â”‚  â€¢ Victory animation                                                    â”‚
//  â”‚  â€¢ Rewards distributed                                                  â”‚
//  â”‚  â€¢ World state changes (door opens, trap disables, etc.)               â”‚
//  â”‚  â€¢ Bonus for speed/no hints/first try                                  â”‚
//  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
//

// ============================================
// PUZZLE TYPES EXPLAINED
// ============================================
//
// COMBINATION/LOCK:
// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚  Set dials to correct values            â”‚
// â”‚                                         â”‚
// â”‚    â”Œâ”€â”  â”Œâ”€â”  â”Œâ”€â”  â”Œâ”€â”                  â”‚
// â”‚    â”‚3â”‚  â”‚7â”‚  â”‚2â”‚  â”‚9â”‚  â†’ Click to      â”‚
// â”‚    â””â”€â”˜  â””â”€â”˜  â””â”€â”˜  â””â”€â”˜    cycle 0-9     â”‚
// â”‚                                         â”‚
// â”‚  Solution: 3729 (clue in room)          â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
//
// LEVER PUZZLE:
// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚  Set levers to correct positions        â”‚
// â”‚                                         â”‚
// â”‚   â–²    â–¼    â–²    â–¼    â–²                 â”‚
// â”‚   â”‚    â”‚    â”‚    â”‚    â”‚   â†’ Toggle      â”‚
// â”‚   â—‹    â—    â—‹    â—    â—‹     up/down     â”‚
// â”‚                                         â”‚
// â”‚  Clue: "Odd ones rise, even ones fall"  â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
//
// TILE SLIDE:
// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚  Slide tiles to form image              â”‚
// â”‚                                         â”‚
// â”‚  â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”                          â”‚
// â”‚  â”‚ 1 â”‚ 2 â”‚ 3 â”‚                          â”‚
// â”‚  â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤   â†’ Click adjacent       â”‚
// â”‚  â”‚ 4 â”‚   â”‚ 5 â”‚     to empty to slide    â”‚
// â”‚  â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤                          â”‚
// â”‚  â”‚ 7 â”‚ 8 â”‚ 6 â”‚                          â”‚
// â”‚  â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜                          â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
//
// MIRROR BEAM:
// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚  Direct light beam to target            â”‚
// â”‚                                         â”‚
// â”‚  ğŸ’¡â”€â”€â”€â”€â”€â”€â”                              â”‚
// â”‚          â”‚                              â”‚
// â”‚      â•²   â”‚   â•±   â†’ Rotate mirrors       â”‚
// â”‚       â•²  â”‚  â•±      to redirect beam     â”‚
// â”‚        â•² â”‚ â•±                            â”‚
// â”‚         â•²â”‚â•±                             â”‚
// â”‚          â— TARGET                       â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
//
// PRESSURE PLATES:
// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚  Activate correct combination           â”‚
// â”‚                                         â”‚
// â”‚  â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”                          â”‚
// â”‚  â”‚ â—‹ â”‚ â— â”‚ â—‹ â”‚   â—‹ = inactive           â”‚
// â”‚  â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤   â— = active             â”‚
// â”‚  â”‚ â— â”‚ â—‹ â”‚ â— â”‚                          â”‚
// â”‚  â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤   â†’ Click to toggle      â”‚
// â”‚  â”‚ â—‹ â”‚ â— â”‚ â—‹ â”‚                          â”‚
// â”‚  â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜                          â”‚
// â”‚                                         â”‚
// â”‚  Clue: Pattern shows on ceiling         â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
//
// RUNE SEQUENCE:
// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚  Press runes in correct order           â”‚
// â”‚                                         â”‚
// â”‚  ğŸ”¥  ğŸ’§  ğŸŒ  ğŸ’¨  â˜€ï¸  ğŸŒ‘                   â”‚
// â”‚                                         â”‚
// â”‚  Display: [ ğŸ”¥ | ğŸ’§ | __ | __ ]          â”‚
// â”‚                                         â”‚
// â”‚  Clue: "Fire born, water quenched,      â”‚
// â”‚         earth buried, air released"      â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
//
// LOGIC GRID:
// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚  Deduce the solution from clues         â”‚
// â”‚                                         â”‚
// â”‚        â”‚ Red â”‚ Blue â”‚ Green â”‚           â”‚
// â”‚  â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
// â”‚  Alice â”‚  X  â”‚  âœ“   â”‚   X   â”‚           â”‚
// â”‚  Bob   â”‚  ?  â”‚  X   â”‚   ?   â”‚           â”‚
// â”‚  Carol â”‚  ?  â”‚  ?   â”‚   ?   â”‚           â”‚
// â”‚                                         â”‚
// â”‚  Clues:                                 â”‚
// â”‚  1. Alice doesn't have red              â”‚
// â”‚  2. Bob's color starts with same        â”‚
// â”‚     letter as his name                  â”‚
// â”‚  3. Green belongs to someone with       â”‚
// â”‚     5 letters in their name             â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
//

// ============================================
// HINT SYSTEM
// ============================================
//
// Hints are EARNED, not just given:
//
// Hint Unlock Conditions:
// â”œâ”€â”€ automatic: Always available
// â”œâ”€â”€ time_elapsed: After 5 minutes of trying
// â”œâ”€â”€ attempts_made: After 10 wrong attempts
// â”œâ”€â”€ skill_check: Pass INT (Investigation) DC 15
// â”œâ”€â”€ resource_cost: Spend 50 gold to "consult sage"
// â”œâ”€â”€ progress_made: Available after 50% solved
// â””â”€â”€ player_request: When explicitly asked (with cost)
//
// Hint Progression:
// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚ Hint 1 (Subtle):                        â”‚
// â”‚ "The inscription mentions the moon..."   â”‚
// â”‚                                         â”‚
// â”‚ Hint 2 (Helpful):                       â”‚
// â”‚ "The moon phase on the door shows 28"   â”‚
// â”‚                                         â”‚
// â”‚ Hint 3 (Direct):                        â”‚
// â”‚ "The numbers should sum to 28"          â”‚
// â”‚                                         â”‚
// â”‚ Hint 4 (Solution):                      â”‚
// â”‚ "Try 4-8-7-9 (4+8+7+9=28)"             â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
//
// Using hints reduces bonus rewards but
// NEVER locks players out of completion.
//

// ============================================
// STATE TRACKING
// ============================================
//
// Everything is tracked:
// â”œâ”€â”€ Every element interaction
// â”œâ”€â”€ Every state change
// â”œâ”€â”€ Time spent
// â”œâ”€â”€ Wrong attempts
// â”œâ”€â”€ Hints used
// â”œâ”€â”€ Contributing players
// â””â”€â”€ Undo history
//
// This enables:
// â”œâ”€â”€ Save/resume puzzles across sessions
// â”œâ”€â”€ GM can see what players have tried
// â”œâ”€â”€ AI can suggest hints based on attempts
// â”œâ”€â”€ Bonus rewards for efficiency
// â””â”€â”€ Collaborative solving (who did what)
//

// ============================================
// EMBEDDING IN SESSIONS
// ============================================
//
// Puzzles can be:
//
// 1. EMBEDDED IN SCENE CARD:
//    GM reveals puzzle card, players see iframe
//    with interactive puzzle
//
// 2. PHONE INTERFACE:
//    Each player sees puzzle on their phone
//    Can interact simultaneously
//
// 3. STANDALONE HTML:
//    Export puzzle as HTML file
//    Share link for remote play
//
// 4. REACT ARTIFACT:
//    Generate as React component
//    Render in Claude artifacts
//
// Communication:
// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚  PUZZLE (iframe)    â†â†’    SESSION (parent)       â”‚
// â”‚                                                   â”‚
// â”‚  postMessage({                                    â”‚
// â”‚    type: 'PUZZLE_SOLVED',                        â”‚
// â”‚    puzzleId: '...',                              â”‚
// â”‚    stats: { time, hints, attempts }              â”‚
// â”‚  })                                              â”‚
// â”‚                                                   â”‚
// â”‚  // Parent responds with rewards                  â”‚
// â”‚  postMessage({                                    â”‚
// â”‚    type: 'REWARD_GRANTED',                       â”‚
// â”‚    xp: 200,                                      â”‚
// â”‚    loot: [...],                                  â”‚
// â”‚    narrative: "The door grinds open..."          â”‚
// â”‚  })                                              â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
//

// ============================================
// GM CONTROLS
// ============================================
//
// â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
// â”‚  ğŸ§© PUZZLE CONTROL: Ancient Door Lock                                       â”‚
// â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
// â”‚                                                                             â”‚
// â”‚  STATUS                                                                     â”‚
// â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
// â”‚  â”‚ Progress: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 45%        Time: 12:34                â”‚    â”‚
// â”‚  â”‚ Attempts: 7 (3 wrong)                   Hints: 1/4 revealed         â”‚    â”‚
// â”‚  â”‚ Players working: Kira, Theron                                      â”‚    â”‚
// â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
// â”‚                                                                             â”‚
// â”‚  CURRENT STATE                                                              â”‚
// â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
// â”‚  â”‚ Dial 1: 3  Dial 2: 7  Dial 3: 2  Dial 4: 9                         â”‚    â”‚
// â”‚  â”‚ Sum: 21 (Need: 28)                                                  â”‚    â”‚
// â”‚  â”‚                                                                     â”‚    â”‚
// â”‚  â”‚ They're close! Consider revealing hint about the sum.               â”‚    â”‚
// â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
// â”‚                                                                             â”‚
// â”‚  ATTEMPT HISTORY                                                            â”‚
// â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
// â”‚  â”‚ 12:20 - Kira set dial 1 to 3 (was 0)                               â”‚    â”‚
// â”‚  â”‚ 12:21 - Theron set dial 2 to 5                                     â”‚    â”‚
// â”‚  â”‚ 12:22 - Kira set dial 2 to 7 (changed from 5)                      â”‚    â”‚
// â”‚  â”‚ 12:25 - Tried combination 3-7-2-5 âŒ                                â”‚    â”‚
// â”‚  â”‚ 12:28 - Theron set dial 4 to 9                                     â”‚    â”‚
// â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
// â”‚                                                                             â”‚
// â”‚  GM ACTIONS                                                                 â”‚
// â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
// â”‚  â”‚ [Reveal Next Hint]  [Reveal Solution]  [Reset Puzzle]               â”‚    â”‚
// â”‚  â”‚ [Adjust Difficulty]  [Bypass (auto-solve)]  [Add Time]              â”‚    â”‚
// â”‚  â”‚                                                                     â”‚    â”‚
// â”‚  â”‚ [Highlight Element: ____]  [Show Clue: ____]                        â”‚    â”‚
// â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
// â”‚                                                                             â”‚
// â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
//

// ============================================
// INTEGRATION WITH OTHER SYSTEMS
// ============================================
//
// LAIR SYSTEM:
//   Puzzles can be lair defenses
//   Solving disables traps or opens paths
//   Lair can "reset" puzzles if party retreats
//
// SESSION CARDS:
//   Puzzle card type embeds interactive puzzle
//   State syncs with session tracking
//   Rewards flow through session loot system
//
// DOWNTIME:
//   "Research puzzle" action provides hints
//   Sages can be consulted for solutions
//   Library research reveals clue sources
//
// ASSETS:
//   Puzzles reference location assets
//   NPCs can provide hints as favors
//   Items can be puzzle components
//
